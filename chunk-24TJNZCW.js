import{a as J}from"./chunk-S4RFOJO2.js";import{C as H,a as W,j as B}from"./chunk-RCIVPRKJ.js";import"./chunk-N23KSFRB.js";import{$ as l,$a as c,Cb as Q,Ea as k,Gb as $,Hb as D,Jb as Z,K as m,L as g,M as v,Ob as K,P as E,Pa as S,Qa as N,S as s,V as x,Wa as o,Xa as C,Ya as G,Z as r,Za as _,_ as a,ab as z,cb as O,da as w,db as F,fb as M,ga as y,ha as b,hb as A,ia as I,ib as L,ka as f,qb as q,sb as P,tb as R,ub as V,wb as j}from"./chunk-44MH6WD3.js";import"./chunk-ZTRS6MQZ.js";import"./chunk-7AA6B6AB.js";import"./chunk-WAVX4AJH.js";import"./chunk-G67DLYCP.js";import"./chunk-G3CV3VGG.js";import"./chunk-IEY6ZC2G.js";import"./chunk-MNDBORQJ.js";import"./chunk-7QVI4S4L.js";import"./chunk-4U6PRYVA.js";import"./chunk-6BZ4INXC.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import"./chunk-LNJ3S2LQ.js";var U=["ionInput"];function X(u,p){u&1&&(r(0,"ion-button",18),l(1,"ion-spinner"),a())}function Y(u,p){u&1&&(r(0,"ion-button",19)(1,"ion-text"),f(2,"Enskripsyon"),a()())}var de=(()=>{let p=class p{constructor(e,t){this.compteService=e,this.router=t,this.isToastOpen=!1,this.toastMessage="",this.formGroup=new _({nom:new c("",[o.required,o.minLength(3),o.pattern("^[a-zA-Z\\s]+$")]),prenom:new c("",[o.required,o.minLength(3),o.pattern("^[a-zA-Z\\s]+$")]),telephone:new c("",[o.required,o.pattern("^[0-9]{8}$")]),email:new c("",[o.required,o.email]),username:new c("",[o.required,o.minLength(4),o.pattern("^[a-zA-Z0-9\\s]+$")])}),this.prenomErrorText="Non an paka rete vid",this.nomErrorText="Sinyati an paka rete vid",this.telephoneErrorText="Nimewo Telefon nan paka rete vid",this.emailErrorText="Imel lan paka rete vid",this.usernameErrorText="Non itilizate a paka rete vid",this.isLoading=!1,H({closeSharp:B}),this.formGroup.valueChanges.subscribe(()=>{this.showErrorsWhenFormIsInvalid(this.formGroup.controls)})}ngOnInit(){}onSubmit(){var e,t,i,h;if(this.formGroup.markAllAsTouched(),!this.formGroup.invalid){this.isLoading=!0;let n=this.formGroup.value,d=new J;n.email=(e=n.email)==null?void 0:e.trim(),n.nom=(t=n.nom)==null?void 0:t.trim(),n.prenom=(i=n.prenom)==null?void 0:i.trim(),n.username=(h=n.username)==null?void 0:h.trim(),d.nom=n.nom,d.prenom=n.prenom,d.email=n.email,d.telephone=n.telephone,d.username=n.username,this.compteService.inscriptionPartie1(d).subscribe({next:T=>{this.isLoading=!1,this.resetInputInForm(),this.router.navigate(["/inscription/verification-email"]),localStorage.setItem("email",d.email)},error:T=>{this.isLoading=!1;try{this.showToast(T.error.messages[0].contenu,T.error.messages[0].type)}catch{this.showToast("Verifye koneksyon entenet ou an","error")}}})}}showErrorsWhenFormIsInvalid(e){Object.keys(e).forEach(t=>{e[t].invalid&&(e[t].touched||e[t].dirty)&&(e[t].hasError("required")&&this.requiredErrorText(t),e.prenom.hasError("minlength")&&(this.prenomErrorText="Non an dwe gen pou pi piti 3 karakte"),e.prenom.hasError("pattern")&&(this.prenomErrorText="Non sa pa valid"),e.nom.hasError("minlength")&&(this.nomErrorText="Sinyati an dwe gen pou pi piti 3 karakte"),e.nom.hasError("pattern")&&(this.nomErrorText="Sinyati sa pa valid"),e.username.hasError("minlength")&&(this.usernameErrorText="Non itilizate an dwe gen pou pi piti 4 karakte"),e.username.hasError("pattern")&&(this.usernameErrorText="Non itilizate sa pa valid"),e.email.hasError("email")&&(this.emailErrorText="Imel sa pa valid"),e.telephone.hasError("pattern")&&(this.telephoneErrorText="Nimewo telefon nan sipoze gen 8 chif"))})}requiredErrorText(e){switch(e){case"prenom":this.prenomErrorText="Non an paka rete vid";break;case"nom":this.nomErrorText="Sinyati an paka rete vid";break;case"telephone":this.telephoneErrorText="Nimewo telefon nan paka rete vid";break;case"email":this.emailErrorText="Imel lan paka rete vid";break;case"username":this.usernameErrorText="Non itilizate an paka rete vid";break}}resetInputInForm(){this.formGroup.setValue({nom:"",prenom:"",username:"",telephone:"",email:""}),this.formGroup.reset()}showToast(e,t,i){this.toastMessage=e,this.isToastOpen=!0,setTimeout(()=>{this.closeToast(),i&&i()},5500)}closeToast(){this.isToastOpen=!1}};p.\u0275fac=function(t){return new(t||p)(g(W),g(S))},p.\u0275cmp=v({type:p,selectors:[["app-inscription"]],viewQuery:function(t,i){if(t&1&&y(U,5),t&2){let h;b(h=I())&&(i.ionInputs=h)}},decls:42,vars:12,consts:[[1,"ion-page"],[3,"forceOverscroll"],[1,"center"],[1,"max-content-w"],[3,"fixed"],[1,"ion-justify-content-center"],["size","6"],["src","assets/img/logo.png"],["size","11"],[1,"title"],[1,"sub-title"],["color","primary","routerLink","/login"],[3,"submit","formGroup"],["formControlName","nom","label","Sinyati","label-placement","floating","placeholder","Antre sinyatiw ou","helperText","Sa ap pemet nou pi byen idantifye w",3,"errorText"],["formControlName","prenom","label","Non","label-placement","floating","placeholder","Antre non ou","helperText","Sa ap pemet nou pi byen idantifye w",3,"errorText"],["formControlName","telephone","type","number","label","Telefon","label-placement","floating","placeholder","Antre telefon ou","helperText","Nimewo sa ap pemet ou fe tranzaksyon MonCash sou platfom lan",3,"errorText"],["formControlName","username","label","Non Itilizate","label-placement","floating","placeholder","Antre on non itilizate","helperText","Non sa ap pemet ou pi diskre sou platfom nan",3,"errorText"],["formControlName","email","email","","label","Imel","label-placement","floating","placeholder","Antre imel ou","helperText","Imel sa ap pemet nou kontakte w,epi restore modpass ou",3,"errorText"],["disabled","true","expand","block","type","submit"],["expand","block","type","submit"],["color","danger","icon","close-sharp",3,"isOpen","message","duration"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"ion-content",1)(2,"div",2)(3,"div",3)(4,"ion-grid",4)(5,"ion-row",5)(6,"ion-col",6),l(7,"ion-img",7),a()(),r(8,"ion-row",5)(9,"ion-col",8)(10,"div",9),f(11," Kreye kont Raf ou "),a()()(),r(12,"ion-row",5)(13,"ion-col",8)(14,"div",10),f(15," Ou gen kont Raf deja? "),r(16,"ion-text",11),f(17,"Koneksyon"),a()()()(),r(18,"ion-row")(19,"ion-col")(20,"form",12),w("submit",function(){return i.onSubmit()}),r(21,"ion-grid")(22,"ion-row",5)(23,"ion-col"),l(24,"ion-input",13),a()(),r(25,"ion-row",5)(26,"ion-col"),l(27,"ion-input",14),a()(),r(28,"ion-row",5)(29,"ion-col"),l(30,"ion-input",15),a()(),r(31,"ion-row",5)(32,"ion-col"),l(33,"ion-input",16),a()(),r(34,"ion-row",5)(35,"ion-col"),l(36,"ion-input",17),a()(),r(37,"ion-row",5)(38,"ion-col"),E(39,X,2,0,"ion-button",18)(40,Y,3,0,"ion-button",19),a()()()()()()()(),l(41,"ion-toast",20),a()()()),t&2&&(m(),s("forceOverscroll",!1),m(3),s("fixed",!0),m(16),s("formGroup",i.formGroup),m(4),s("errorText",i.nomErrorText),m(3),s("errorText",i.prenomErrorText),m(3),s("errorText",i.telephoneErrorText),m(3),s("errorText",i.usernameErrorText),m(3),s("errorText",i.emailErrorText),m(3),x(i.isLoading?39:40),m(2),s("isOpen",i.isToastOpen)("message",i.toastMessage)("duration",5e3))},dependencies:[Z,q,$,K,D,j,Q,P,V,R,k,A,z,C,G,M,L,O,F,N],styles:["ion-input[_ngcontent-%COMP%]{--ion-color-success: #ff9800}ion-button[_ngcontent-%COMP%]{margin:0;width:100%}"]});let u=p;return u})();export{de as InscriptionPage};
