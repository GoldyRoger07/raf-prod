import{C as B,a as R,h as q,j as z}from"./chunk-RCIVPRKJ.js";import"./chunk-N23KSFRB.js";import{$ as l,$a as y,Cb as L,Ea as T,Gb as V,Hb as A,Jb as j,K as a,L as p,M as f,Ob as D,P as h,Pa as b,S as m,V as g,Wa as u,Xa as I,Ya as w,Z as r,Za as S,_ as n,a as d,ab as G,cb as x,da as v,db as C,fb as E,hb as k,ib as F,ka as c,qb as O,sb as _,tb as M,ub as P,wb as N}from"./chunk-44MH6WD3.js";import"./chunk-ZTRS6MQZ.js";import"./chunk-7AA6B6AB.js";import"./chunk-WAVX4AJH.js";import"./chunk-G67DLYCP.js";import"./chunk-G3CV3VGG.js";import"./chunk-IEY6ZC2G.js";import"./chunk-MNDBORQJ.js";import"./chunk-7QVI4S4L.js";import"./chunk-4U6PRYVA.js";import"./chunk-6BZ4INXC.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import"./chunk-LNJ3S2LQ.js";function H(s,t){s&1&&(r(0,"ion-button",11),l(1,"ion-spinner"),n())}function J(s,t){s&1&&(r(0,"ion-button",12)(1,"ion-text"),c(2,"Valide"),n()())}var ie=(()=>{let t=class t{constructor(i,e){this.compteService=i,this.router=e,this.isLoading=!1,this.isToastOpen=!1,this.toastMessage="",this.colorToast="",this.iconToast="",this.subscription=new d,this.emailErrorText="",this.formGroup=new S({email:new y("",[u.required,u.email])}),B({closeSharp:z,checkmarkSharp:q}),this.formGroup.valueChanges.subscribe(()=>{this.formGroup.invalid&&(this.formGroup.touched||this.formGroup.dirty)&&(this.formGroup.controls.email.hasError("required")&&(this.emailErrorText="Imel lan paka rete vid"),this.formGroup.controls.email.hasError("email")&&(this.emailErrorText="Imel sa pa valid"))})}onSubmit(){if(this.formGroup.markAllAsTouched(),!this.formGroup.invalid){this.isLoading=!0;let i=this.formGroup.value.email;this.subscription.add(this.compteService.forgetPassword(i).subscribe({next:()=>{this.isLoading=!1,this.formGroup.reset(),this.router.navigate(["/inscription/verification-email"]),localStorage.setItem("email",i),localStorage.setItem("context","changerPassword")},error:e=>{this.isLoading=!1;try{this.showToast(e.error.message.contenu,e.error.message.type)}catch{this.showToast("Verifye koneksyon entenet ou an","error")}}}))}}ngOnInit(){}showToast(i,e,o){this.toastMessage=i,this.isToastOpen=!0,setTimeout(()=>{this.closeToast(),o&&o()},5500)}closeToast(){this.isToastOpen=!1}};t.\u0275fac=function(e){return new(e||t)(p(R),p(b))},t.\u0275cmp=f({type:t,selectors:[["app-forget-password"]],decls:23,vars:8,consts:[[3,"forceOverscroll"],[1,"center"],[1,"max-content-w"],[3,"fixed"],[1,"ion-justify-content-center"],["size","6"],["src","assets/img/logo.png"],["size","11"],[1,"title"],[3,"submit","formGroup"],["formControlName","email","email","","label","Imel","label-placement","floating","placeholder","Antre imel ou","helperText","Imel sa ap pemet nou kontakte w,epi restore modpass ou",3,"errorText"],["expand","block","type","submit","disabled","true"],["expand","block","type","submit"],["color","danger","icon","close-sharp",3,"isOpen","message","duration"]],template:function(e,o){e&1&&(r(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"ion-grid",3)(4,"ion-row",4)(5,"ion-col",5),l(6,"ion-img",6),n()(),r(7,"ion-row",4)(8,"ion-col",7)(9,"div",8),c(10," Antre imel ou te kreye kont lan avel lan,nap voye on kod pou ou "),n()()(),r(11,"ion-row")(12,"ion-col")(13,"form",9),v("submit",function(){return o.onSubmit()}),r(14,"ion-grid")(15,"ion-row",4)(16,"ion-col"),l(17,"ion-input",10),n()(),r(18,"ion-row",4)(19,"ion-col"),h(20,H,2,0,"ion-button",11)(21,J,3,0,"ion-button",12),n()()()()()()()()(),l(22,"ion-toast",13),n()),e&2&&(m("forceOverscroll",!1),a(3),m("fixed",!0),a(10),m("formGroup",o.formGroup),a(4),m("errorText",o.emailErrorText),a(3),g(o.isLoading?20:21),a(2),m("isOpen",o.isToastOpen)("message",o.toastMessage)("duration",5e3))},dependencies:[D,N,F,G,I,w,E,x,C,A,V,O,_,j,L,P,M,T,k],encapsulation:2});let s=t;return s})();export{ie as ForgetPasswordPage};
