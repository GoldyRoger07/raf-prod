import{a as D}from"./chunk-IABGB7DL.js";import{C as j,a as q,h as z,j as R}from"./chunk-RCIVPRKJ.js";import"./chunk-N23KSFRB.js";import{$ as m,$a as f,Cb as O,Ea as T,Gb as A,Hb as L,K as a,L as d,M as h,Ob as V,P as w,Pa as b,S as p,V as g,Wa as l,Xa as x,Ya as S,Z as r,Za as k,_ as i,a as u,ab as y,cb as E,da as v,db as G,hb as C,ib as I,ka as c,qb as M,sb as P,tb as _,ub as F,wb as N}from"./chunk-44MH6WD3.js";import"./chunk-ZTRS6MQZ.js";import"./chunk-7AA6B6AB.js";import"./chunk-WAVX4AJH.js";import"./chunk-G67DLYCP.js";import"./chunk-G3CV3VGG.js";import"./chunk-IEY6ZC2G.js";import"./chunk-MNDBORQJ.js";import"./chunk-7QVI4S4L.js";import"./chunk-4U6PRYVA.js";import"./chunk-6BZ4INXC.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import"./chunk-LNJ3S2LQ.js";function K(s,t){s&1&&(r(0,"ion-button",12),m(1,"ion-spinner"),i())}function B(s,t){s&1&&(r(0,"ion-button",13)(1,"ion-text"),c(2,"Validasyon"),i()())}var to=(()=>{let t=class t{constructor(n,o){this.compteService=n,this.router=o,this.isLoading=!1,this.isToastOpen=!1,this.toastMessage="",this.colorToast="",this.iconToast="",this.subscription=new u,this.formGroup=new k({password:new f("",[l.required,l.minLength(8),l.pattern("^(?=\\S*[a-zA-Z])(?=\\S*[0-9])\\S*$")]),confirmPassword:new f("",[l.required])},{validators:D("password","confirmPassword")}),this.passwordErrorText="Modpass lan paka rete vid",this.confirmPasswordErrorText="Modpass konfimasyon an paka rete vid",j({closeSharp:R,checkmarkSharp:z}),this.formGroup.valueChanges.subscribe(()=>{this.formGroup.invalid&&(this.formGroup.touched||this.formGroup.dirty)&&(this.formGroup.controls.password.hasError("required")&&(this.passwordErrorText="Modpass lan paka rete vid"),this.formGroup.controls.confirmPassword.hasError("required")&&(this.confirmPasswordErrorText="Modpass konfimasyon an paka rete vid"),this.formGroup.controls.confirmPassword.hasError("passwordmismatch")&&(this.confirmPasswordErrorText="Modpass yo pa dwe diferan"),this.formGroup.controls.password.hasError("pattern")&&(this.passwordErrorText="Modpass sa pa valid"),this.formGroup.controls.password.hasError("minlength")&&(this.passwordErrorText="Modpass lan dwe gen pou pi piti 8 karakte"))})}onSubmit(){if(this.formGroup.markAllAsTouched(),!this.formGroup.invalid){this.isLoading=!0;let n={password:this.formGroup.value.password,email:localStorage.getItem("email")};localStorage.removeItem("context"),this.subscription.add(this.compteService.forgetPassword2(n).subscribe({next:o=>{this.isLoading=!1,this.formGroup.reset(),this.router.navigate(["/login"]),localStorage.removeItem("email")},error:o=>{this.isLoading=!1;try{}catch{this.showToast("Verifye koneksyon entenet ou an","error")}}}))}}ngOnInit(){}showToast(n,o,e){o==="success"?(this.iconToast="checkmark-sharp",this.colorToast="success"):(this.iconToast="close-sharp",this.colorToast="danger"),this.toastMessage=n,this.isToastOpen=!0,setTimeout(()=>{this.closeToast(),e&&e()},5500)}closeToast(){this.isToastOpen=!1}};t.\u0275fac=function(o){return new(o||t)(d(q),d(b))},t.\u0275cmp=h({type:t,selectors:[["app-changer-password"]],decls:25,vars:6,consts:[[3,"forceOverscroll"],[1,"center"],[1,"max-content-w"],[3,"fixed"],[1,"ion-justify-content-center"],["size","6"],["src","assets/img/logo.png"],["size","11"],[1,"title"],[3,"submit","formGroup"],["label","Modpass","label-placement","floating","placeholder","Antre modpass lan","helperText","On bon modpass sipoze gen pou piti 8 karakte,let ak chif epi kek senbol(siw vle)","type","password","formControlName","password",3,"errorText"],["label","Konfime modpass lan","label-placement","floating","placeholder","Antre modpass lan","helperText","Antre menm modpass lan","type","password","formControlName","confirmPassword",3,"errorText"],["expand","block","type","submit","disabled","true"],["expand","block","type","submit"]],template:function(o,e){o&1&&(r(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"ion-grid",3)(4,"ion-row",4)(5,"ion-col",5),m(6,"ion-img",6),i()(),r(7,"ion-row",4)(8,"ion-col",7)(9,"div",8),c(10," Kreye on modpass pou kont Raf ou a "),i()()(),r(11,"ion-row")(12,"ion-col")(13,"form",9),v("submit",function(){return e.onSubmit()}),r(14,"ion-grid")(15,"ion-row")(16,"ion-col"),m(17,"ion-input",10),i()(),r(18,"ion-row")(19,"ion-col"),m(20,"ion-input",11),i()(),r(21,"ion-row",4)(22,"ion-col"),w(23,K,2,0,"ion-button",12)(24,B,3,0,"ion-button",13),i()()()()()()()()()()),o&2&&(p("forceOverscroll",!1),a(3),p("fixed",!0),a(10),p("formGroup",e.formGroup),a(4),p("errorText",e.passwordErrorText),a(3),p("errorText",e.confirmPasswordErrorText),a(3),g(e.isLoading?23:24))},dependencies:[N,V,I,y,x,S,E,G,F,O,P,A,L,M,_,T,C],encapsulation:2});let s=t;return s})();export{to as ChangerPasswordPage};
