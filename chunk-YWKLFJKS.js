import{a as J}from"./chunk-S4RFOJO2.js";import{C as H,a as K,i as B,j as U}from"./chunk-RCIVPRKJ.js";import{a as D}from"./chunk-N23KSFRB.js";import{$ as n,$a as g,Cb as z,Ea as x,Gb as A,Hb as V,Jb as j,K as m,L as d,M as h,Ob as q,P as v,Pa as S,Qa as k,S as p,V as b,Wa as u,Xa as y,Ya as C,Z as e,Za as O,_ as o,a as f,ab as T,cb as I,da as w,db as M,eb as _,hb as G,ib as E,ka as l,qb as P,sb as L,tb as F,ub as N,wb as R}from"./chunk-44MH6WD3.js";import"./chunk-ZTRS6MQZ.js";import"./chunk-7AA6B6AB.js";import"./chunk-WAVX4AJH.js";import"./chunk-G67DLYCP.js";import"./chunk-G3CV3VGG.js";import"./chunk-IEY6ZC2G.js";import"./chunk-MNDBORQJ.js";import"./chunk-7QVI4S4L.js";import"./chunk-4U6PRYVA.js";import"./chunk-6BZ4INXC.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import"./chunk-LNJ3S2LQ.js";function Q(a,r){a&1&&(e(0,"ion-button",15),n(1,"ion-spinner"),o())}function W(a,r){a&1&&(e(0,"ion-button",16)(1,"ion-text"),l(2,"Koneksyon"),o()())}var me=(()=>{let r=class r{constructor(s,i,t){this.compteService=s,this.router=i,this.urlService=t,this.formGroup=new O({email:new g("",u.required),password:new g("",u.required)}),this.isLoading=!1,this.isToastOpen=!1,this.toastMessage="",this.subscription=new f,H({closeSharp:U,closeCircleOutline:B})}ngOnInit(){}onSubmit(){if(this.formGroup.markAllAsTouched(),!this.formGroup.invalid){this.isLoading=!0;let s=this.formGroup.value,i=new J;i.email=s.email,i.password=s.password,this.subscription.add(this.compteService.login(i).subscribe({next:t=>{this.isLoading=!1,localStorage.setItem("token",t.token),this.formGroup.reset(),this.urlService.redirectTo("/accueil")},error:t=>{this.isLoading=!1;try{let c=t.error.message;this.showToast(c.contenu,c.type)}catch{this.showToast("Verifye koneksyon entenet ou an","error")}}}))}}showToast(s,i,t){this.toastMessage=s,this.isToastOpen=!0,setTimeout(()=>{this.closeToast(),t&&t()},5500)}closeToast(){this.isToastOpen=!1}ngOnDestroy(){this.subscription.unsubscribe()}};r.\u0275fac=function(i){return new(i||r)(d(K),d(S),d(D))},r.\u0275cmp=h({type:r,selectors:[["app-login"]],decls:49,vars:7,consts:[[1,"ion-page"],[3,"forceOverscroll"],[1,"center"],[1,"max-content-w"],[3,"fixed"],[1,"ion-justify-content-center"],["size","5"],["src","assets/img/logo.png"],["size","11"],[1,"title"],[1,"sub-title"],["color","primary","routerLink","/inscription"],[3,"submit","formGroup"],["label","Imel","label-placement","floating","placeholder","Antre imel ou","helperText","Antre yon imel ki valid","errorText","Imel lan paka rete vid","formControlName","email","required","true"],["type","password","label","Modpass","label-placement","floating","helperText","Antre on modpass ki valid","errorText","Modpass lan paka rete vid","placeholder","Antre modpass ou","formControlName","password"],["disabled","true","expand","block","type","submit"],["expand","block","type","submit"],["color","primary","routerLink","/forget-password",1,"forget-password-text"],[1,"line-block"],[1,"line"],["color","light"],["id","logoGoogle","src","assets/img/logo_google.png"],["color","danger","icon","close-sharp",3,"isOpen","message","duration"]],template:function(i,t){i&1&&(e(0,"div",0)(1,"ion-content",1)(2,"div",2)(3,"div",3)(4,"ion-grid",4)(5,"ion-row",5)(6,"ion-col",6),n(7,"ion-img",7),o()(),e(8,"ion-row",5)(9,"ion-col",8)(10,"div",9),l(11," Konekte ak kont Raf ou "),o()()(),e(12,"ion-row",5)(13,"ion-col",8)(14,"div",10),l(15," Ou poko gen kont Raf? "),e(16,"ion-text",11),l(17,"Enskripsyon"),o()()()(),e(18,"ion-row")(19,"ion-col")(20,"form",12),w("submit",function(){return t.onSubmit()}),e(21,"ion-grid")(22,"ion-row",5)(23,"ion-col"),n(24,"ion-input",13),o()(),e(25,"ion-row",5)(26,"ion-col"),n(27,"ion-input",14),o()(),e(28,"ion-row",5)(29,"ion-col"),v(30,Q,2,0,"ion-button",15)(31,W,3,0,"ion-button",16),o()()()()()(),e(32,"ion-row",5)(33,"ion-col",8)(34,"ion-text",17),l(35,"M bliye modpass mw"),o()()(),e(36,"ion-row",5)(37,"ion-col",8)(38,"div",18),n(39,"div",19),l(40," Oubyen avek "),n(41,"div",19),o()()(),e(42,"ion-row",5)(43,"ion-col",8)(44,"ion-button",20),n(45,"ion-img",21),e(46,"ion-text"),l(47,"Google"),o()()()()()()(),n(48,"ion-toast",22),o()()),i&2&&(m(),p("forceOverscroll",!1),m(3),p("fixed",!0),m(16),p("formGroup",t.formGroup),m(10),b(t.isLoading?30:31),m(18),p("isOpen",t.isToastOpen)("message",t.toastMessage)("duration",5e3))},dependencies:[j,A,P,q,z,R,L,N,V,F,x,G,T,y,C,_,E,I,M,k],styles:["ion-input[_ngcontent-%COMP%]{--ion-color-success: #ff9800}ion-button[_ngcontent-%COMP%]{margin:0;width:100%}.title[_ngcontent-%COMP%]{padding-top:20px;font-weight:700;text-align:center;color:var(--ion-color-dark-tint);font-size:20px}.sub-title[_ngcontent-%COMP%]{color:var(--ion-color-dark-tint);font-size:small;text-align:center}.forget-password-text[_ngcontent-%COMP%]{font-size:small}.line-block[_ngcontent-%COMP%]{padding:10px 0;display:flex;text-wrap:nowrap;align-items:center;font-size:small;gap:10px}.line-block[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{height:1px;width:100%;background:#cfcfcf}#logoGoogle[_ngcontent-%COMP%]{margin-right:10px}"]});let a=r;return a})();export{me as LoginPage};
