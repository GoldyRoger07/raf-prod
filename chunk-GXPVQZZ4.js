import{a as B}from"./chunk-IABGB7DL.js";import{a as K}from"./chunk-S4RFOJO2.js";import{C as j,a as z,h as D,j as R}from"./chunk-RCIVPRKJ.js";import"./chunk-N23KSFRB.js";import{$ as p,$a as u,Cb as N,Ea as v,Gb as A,Hb as L,Jb as V,K as a,L as d,M as h,Ob as q,P as w,Pa as b,S as m,V as g,Wa as l,Xa as y,Ya as E,Z as r,Za as S,_ as t,a as f,ab as G,cb as k,da as T,db as x,hb as C,ib as I,ka as c,qb as M,sb as P,tb as O,ub as _,wb as F}from"./chunk-44MH6WD3.js";import"./chunk-ZTRS6MQZ.js";import"./chunk-7AA6B6AB.js";import"./chunk-WAVX4AJH.js";import"./chunk-G67DLYCP.js";import"./chunk-G3CV3VGG.js";import"./chunk-IEY6ZC2G.js";import"./chunk-MNDBORQJ.js";import"./chunk-7QVI4S4L.js";import"./chunk-4U6PRYVA.js";import"./chunk-6BZ4INXC.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import"./chunk-LNJ3S2LQ.js";function $(s,i){s&1&&(r(0,"ion-button",12),p(1,"ion-spinner"),t())}function H(s,i){s&1&&(r(0,"ion-button",13)(1,"ion-text"),c(2,"Validasyon"),t()())}var no=(()=>{let i=class i{constructor(n,e){this.compteService=n,this.router=e,this.isLoading=!1,this.isToastOpen=!1,this.toastMessage="",this.colorToast="",this.iconToast="",this.subscription=new f,this.formGroup=new S({password:new u("",[l.required,l.minLength(8),l.pattern("^(?=\\S*[a-zA-Z])(?=\\S*[0-9])\\S*$")]),confirmPassword:new u("",[l.required])},{validators:B("password","confirmPassword")}),this.passwordErrorText="Modpass lan paka rete vid",this.confirmPasswordErrorText="Modpass konfimasyon an paka rete vid",j({closeSharp:R,checkmarkSharp:D}),this.formGroup.valueChanges.subscribe(()=>{this.formGroup.invalid&&(this.formGroup.touched||this.formGroup.dirty)&&(this.formGroup.controls.password.hasError("required")&&(this.passwordErrorText="Modpass lan paka rete vid"),this.formGroup.controls.confirmPassword.hasError("required")&&(this.confirmPasswordErrorText="Modpass konfimasyon an paka rete vid"),this.formGroup.controls.confirmPassword.hasError("passwordmismatch")&&(this.confirmPasswordErrorText="Modpass yo pa dwe diferan"),this.formGroup.controls.password.hasError("pattern")&&(this.passwordErrorText="Modpass sa pa valid"),this.formGroup.controls.password.hasError("minlength")&&(this.passwordErrorText="Modpass lan dwe gen pou pi piti 8 karakte"))})}onSubmit(){if(this.formGroup.markAllAsTouched(),!this.formGroup.invalid){this.isLoading=!0;let n=this.formGroup.value,e=new K;e.email=localStorage.getItem("email"),e.password=n.password,this.subscription.add(this.compteService.inscriptionPartie2(e).subscribe({next:o=>{this.isLoading=!1,this.showToast(o.message.contenu,o.message.type,()=>{this.formGroup.reset(),this.router.navigate(["/login"]),localStorage.removeItem("email")})},error:o=>{this.isLoading=!1;try{this.showToast(o.error.message.contenu,o.error.message.type,()=>{o.error.message.codeError===1&&(this.formGroup.reset(),this.router.navigate(["/inscription"])),o.error.message.codeError===2&&(this.formGroup.reset(),this.router.navigate(["/inscription/verification-email"]))})}catch{this.showToast("Verifye koneksyon entenet ou an","error")}}}))}}showToast(n,e,o){e==="success"?(this.iconToast="checkmark-sharp",this.colorToast="success"):(this.iconToast="close-sharp",this.colorToast="danger"),this.toastMessage=n,this.isToastOpen=!0,setTimeout(()=>{this.closeToast(),o&&o()},5500)}closeToast(){this.isToastOpen=!1}ngOnInit(){}ngOnDestroy(){this.subscription.unsubscribe()}};i.\u0275fac=function(e){return new(e||i)(d(z),d(b))},i.\u0275cmp=h({type:i,selectors:[["app-create-password"]],decls:26,vars:11,consts:[[3,"forceOverscroll"],[1,"center"],[1,"max-content-w"],[3,"fixed"],[1,"ion-justify-content-center"],["size","6"],["src","assets/img/logo.png"],["size","11"],[1,"title"],[3,"submit","formGroup"],["label","Modpass","label-placement","floating","placeholder","Antre modpass lan","helperText","On bon modpass sipoze gen pou piti 8 karakte,let ak chif epi kek senbol(siw vle)","type","password","formControlName","password",3,"errorText"],["label","Konfime modpass lan","label-placement","floating","placeholder","Antre modpass lan","helperText","Antre menm modpass lan","type","password","formControlName","confirmPassword",3,"errorText"],["expand","block","type","submit","disabled","true"],["expand","block","type","submit"],[3,"color","isOpen","message","duration","icon"]],template:function(e,o){e&1&&(r(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"ion-grid",3)(4,"ion-row",4)(5,"ion-col",5),p(6,"ion-img",6),t()(),r(7,"ion-row",4)(8,"ion-col",7)(9,"div",8),c(10," Kreye on modpass pou kont Raf ou an "),t()()(),r(11,"ion-row")(12,"ion-col")(13,"form",9),T("submit",function(){return o.onSubmit()}),r(14,"ion-grid")(15,"ion-row")(16,"ion-col"),p(17,"ion-input",10),t()(),r(18,"ion-row")(19,"ion-col"),p(20,"ion-input",11),t()(),r(21,"ion-row",4)(22,"ion-col"),w(23,$,2,0,"ion-button",12)(24,H,3,0,"ion-button",13),t()()()()()()()()(),p(25,"ion-toast",14),t()),e&2&&(m("forceOverscroll",!1),a(3),m("fixed",!0),a(10),m("formGroup",o.formGroup),a(4),m("errorText",o.passwordErrorText),a(3),m("errorText",o.confirmPasswordErrorText),a(3),g(o.isLoading?23:24),a(2),m("color",o.colorToast)("isOpen",o.isToastOpen)("message",o.toastMessage)("duration",5e3)("icon",o.iconToast))},dependencies:[V,I,G,y,E,k,x,A,L,M,q,F,P,N,_,O,v,C],encapsulation:2});let s=i;return s})();export{no as CreatePasswordPage};
